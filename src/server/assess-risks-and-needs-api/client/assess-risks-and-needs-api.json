{"openapi":"3.0.1","info":{"title":"HMPPS Risks and Needs API","description":"API for managing risks and needs","contact":{"name":"HMPPS Digital Studio","email":"feedback@digital.justice.gov.uk"},"version":"2021-07-01.583.149d129"},"servers":[{"url":"https://assess-risks-and-needs-dev.hmpps.service.justice.gov.uk","description":"Generated server url"}],"paths":{"/risks/supplementary":{"post":{"tags":["supplementary-risks-controller"],"description":"Create new supplementary risk for a given source","operationId":"createSupplementaryRisk","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSupplementaryRiskDto"}}},"required":true},"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}}}}},"/risks/supplementary/{supplementaryRiskId}":{"get":{"tags":["supplementary-risks-controller"],"description":"Gets supplementary risk for a given ID","operationId":"getSupplementaryRiskById","parameters":[{"name":"supplementaryRiskId","in":"path","description":"Supplementary ID","required":true,"schema":{"type":"string","format":"uuid"},"example":"78beac68-884c-4784-9bea-fd8088f52a47"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Supplementary risk source Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}}}}},"/risks/supplementary/{sourceType}/{sourceId}":{"get":{"tags":["supplementary-risks-controller"],"description":"Gets supplementary risk for a given source","operationId":"getSupplementaryRiskBySource","parameters":[{"name":"sourceId","in":"path","description":"Source ID","required":true,"schema":{"type":"string"},"example":"78beac68-884c-4784-9bea-fd8088f52a47"},{"name":"sourceType","in":"path","description":"Source Type","required":true,"schema":{"type":"string","enum":["INTERVENTION_REFERRAL"]},"example":"INTERVENTION_REFERRAL"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Supplementary risk source Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}}}}},"/risks/supplementary/crn/{crn}":{"get":{"tags":["supplementary-risks-controller"],"description":"Gets supplementary risk for a given CRN","operationId":"getSupplementaryRisksByCrn","parameters":[{"name":"crn","in":"path","description":"CRN","required":true,"schema":{"type":"string"},"example":"X123456"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Supplementary risk source Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}}}}}},"/risks/crn/{crn}":{"get":{"tags":["risks-controller"],"description":"Gets other rosh risks for crn","operationId":"getRoshRisksByCrn","parameters":[{"name":"crn","in":"path","description":"CRN","required":true,"schema":{"type":"string"},"example":"D1974X"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"CRN Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AllRoshRiskDto"}}}}}}},"/risks/crn/{crn}/summary":{"get":{"tags":["risks-controller"],"description":"Gets rosh summary for crn","operationId":"getRiskSummaryByCrn","parameters":[{"name":"crn","in":"path","description":"CRN","required":true,"schema":{"type":"string"},"example":"D1974X"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"CRN Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RiskRoshSummaryDto"}}}}}}},"/risks/crn/{crn}/self":{"get":{"tags":["risks-controller"],"description":"Gets rosh to individual for crn","operationId":"getRiskToSelfByCrn","parameters":[{"name":"crn","in":"path","description":"CRN","required":true,"schema":{"type":"string"},"example":"D1974X"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"CRN Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RoshRiskToSelfDto"}}}}}}},"/risks/crn/{crn}/other":{"get":{"tags":["risks-controller"],"description":"Gets other rosh risks for crn","operationId":"getOtherRisksByCrn","parameters":[{"name":"crn","in":"path","description":"CRN","required":true,"schema":{"type":"string"},"example":"D1974X"}],"responses":{"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Bad Request","content":{"*/*":{"schema":{"oneOf":[{"type":"object"},{"$ref":"#/components/schemas/ErrorResponse"}]}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"CRN Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"409":{"description":"Conflict","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SupplementaryRiskDto"}}}},"403":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OtherRoshRisksDto"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"status":{"type":"integer","description":"Status of Error Code","format":"int32","example":400},"developerMessage":{"type":"string","description":"Developer Information message","example":"System is down"},"errorCode":{"type":"integer","description":"Internal Error Code","format":"int32","example":20012},"userMessage":{"type":"string","description":"Error message information","example":"Prisoner Not Found"},"moreInfo":{"type":"string","description":"Additional information about the error","example":"Hard disk failure"}}},"SupplementaryRiskDto":{"required":["createdByUserType","createdDate","crn","riskSummaryComments","source","sourceId"],"type":"object","properties":{"supplementaryRiskId":{"type":"string","description":"Supplementary Risk ID","format":"uuid","example":"78beac68-884c-4784-9bea-fd8088f52a47"},"source":{"type":"string","description":"Source of Risk","example":"INTERVENTION_REFERRAL","enum":["INTERVENTION_REFERRAL"]},"sourceId":{"type":"string","description":"Source Id","example":"78beac68-884c-4784-9bea-fd8088f52a47 or 1989823"},"crn":{"type":"string","description":"Offender CRN","example":"DX12340A"},"createdByUser":{"type":"string","description":"Created By User","example":"Paul Newman"},"createdByUserType":{"type":"string","description":"Created By User Type","example":"delius"},"createdDate":{"type":"string","description":"Created At","format":"date-time"},"riskSummaryComments":{"type":"string","description":"Risk Summary Comments","example":"Free text up to 4000 characters"}}},"CreateSupplementaryRiskDto":{"required":["createdByUserType","createdDate","crn","riskSummaryComments","source","sourceId"],"type":"object","properties":{"source":{"type":"string","description":"Source of Risk","example":"INTERVENTION_REFERRAL","enum":["INTERVENTION_REFERRAL"]},"sourceId":{"type":"string","description":"Source Id","example":"78beac68-884c-4784-9bea-fd8088f52a47 or 1989823"},"crn":{"type":"string","description":"Offender CRN","example":"DX12340A"},"createdByUserType":{"type":"string","description":"Created By User Type","example":"delius"},"createdDate":{"type":"string","description":"Created At","format":"date-time"},"riskSummaryComments":{"type":"string","description":"Risk Summary Comments","example":"Free text up to 4000 characters"}},"description":"Supplementary Risk"},"AllRoshRiskDto":{"required":["otherRisks","riskToSelf","summary"],"type":"object","properties":{"riskToSelf":{"$ref":"#/components/schemas/RoshRiskToSelfDto"},"otherRisks":{"$ref":"#/components/schemas/OtherRoshRisksDto"},"summary":{"$ref":"#/components/schemas/RiskRoshSummaryDto"}}},"OtherRoshRisksDto":{"type":"object","properties":{"escapeOrAbscond":{"type":"string","description":"Escape / abscond","enum":["YES","NO","DK"]},"controlIssuesDisruptiveBehaviour":{"type":"string","description":"Control issues / disruptive behaviour","enum":["YES","NO","DK"]},"breachOfTrust":{"type":"string","description":"Concerns in respect of breach of trust","enum":["YES","NO","DK"]},"riskToOtherPrisoners":{"type":"string","description":"Risks to other prisoners","enum":["YES","NO","DK"]}}},"RiskDto":{"type":"object","properties":{"risk":{"type":"string","description":"is there any risk","example":"Yes, No, Don't know, null","enum":["YES","NO","DK"]},"previous":{"type":"string","description":"Previous concerns","example":"Yes, No, Don't know","enum":["YES","NO","DK"]},"previousConcernsText":{"type":"string","description":"Previous concerns supporting comments","example":"Risk of self harms concerns due to ..."},"current":{"type":"string","description":"Current concerns","example":"Yes, No, Don't know","enum":["YES","NO","DK"]},"currentConcernsText":{"type":"string","description":"Current concerns supporting comments","example":"Risk of self harms concerns due to ..."}},"description":"Vulnerability"},"RiskRoshSummaryDto":{"required":["riskInCommunity","riskInCustody"],"type":"object","properties":{"whoIsAtRisk":{"type":"string","description":"Who is at risk?","example":"X, Y and Z are at risk"},"natureOfRisk":{"type":"string","description":"What is the nature of the risk?","example":"The nature of the risk is X"},"riskImminence":{"type":"string","description":"When is the risk likely to be greatest. Consider the timescale and indicate whether risk is immediate or not. Consider the risks in custody as well as on release.","example":"the risk is imminent and more probably in X situation"},"riskIncreaseFactors":{"type":"string","description":"What circumstances are likely to increase risk. Describe factors, actions, events which might increase level of risk, now and in the future.","example":"If offender in situation X the risk can be higher"},"riskMitigationFactors":{"type":"string","description":"What factors are likely to reduce the risk. Describe factors, actions, and events which may reduce or contain the level of risk. What has previously stopped him / her?","example":"Giving offender therapy in X will reduce the risk"},"riskInCommunity":{"type":"object","additionalProperties":{"type":"array","description":"Assess the risk of serious harm the offender poses in the community","example":{"HIGH ":["Children","Public","Know adult"],"MEDIUM":["Staff"],"LOW":["Prisoners"]},"items":{"type":"string","description":"Assess the risk of serious harm the offender poses in the community","example":"{\"HIGH \":[\"Children\",\"Public\",\"Know adult\"],\"MEDIUM\":[\"Staff\"],\"LOW\":[\"Prisoners\"]}"}},"description":"Assess the risk of serious harm the offender poses in the community","example":{"HIGH ":["Children","Public","Know adult"],"MEDIUM":["Staff"],"LOW":["Prisoners"]}},"riskInCustody":{"type":"object","additionalProperties":{"type":"array","description":"Assess the risk of serious harm the offender poses on the basis that they could be released imminently back into the community.Assess both the risk of serious harm the offender presents now, in custody, and the risk they could present to others whilst in a custodial setting.","example":{"HIGH ":["Know adult"],"VERY_HIGH":["Staff","Prisoners"],"LOW":["Children","Public"]},"items":{"type":"string","description":"Assess the risk of serious harm the offender poses on the basis that they could be released imminently back into the community.Assess both the risk of serious harm the offender presents now, in custody, and the risk they could present to others whilst in a custodial setting.","example":"{\"HIGH \":[\"Know adult\"],\"VERY_HIGH\":[\"Staff\",\"Prisoners\"],\"LOW\":[\"Children\",\"Public\"]}"}},"description":"Assess the risk of serious harm the offender poses on the basis that they could be released imminently back into the community.Assess both the risk of serious harm the offender presents now, in custody, and the risk they could present to others whilst in a custodial setting.","example":{"HIGH ":["Know adult"],"VERY_HIGH":["Staff","Prisoners"],"LOW":["Children","Public"]}}}},"RoshRiskToSelfDto":{"type":"object","properties":{"suicide":{"$ref":"#/components/schemas/RiskDto"},"selfHarm":{"$ref":"#/components/schemas/RiskDto"},"custody":{"$ref":"#/components/schemas/RiskDto"},"hostelSetting":{"$ref":"#/components/schemas/RiskDto"},"vulnerability":{"$ref":"#/components/schemas/RiskDto"}}}}}}
